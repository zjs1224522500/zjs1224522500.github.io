<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
<title>
    Elvis Zhang
</title>
<!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.js"></script><![endif]-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<meta name="author" content="Elvis">
<meta name="description" content="The easy way or the right way!">
<meta name="keywords" content="Dead">
<script async src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
<link rel="stylesheet" href="https://blog.shunzi.tech/styles/main.css" />
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/1.7.1/jquery.min.js"></script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/css/style.min.css" />
        <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/tocbot.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/script.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/icon.min.js"></script>
        
            <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/Card/prism.min.js"></script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/css/Card/prism.min.css" />
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css">
            <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js"></script>
            
                <!--点击特效-->
                <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/love.min.js"></script>
                
                        <!--CDN样式-->
                        <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/hit-kounter-lc-0.3.0.js"></script>
                        <script src="https://cdn1.lncld.net/static/js/av-min-1.5.0.js"></script>
                        
                            <script>
                                (function() {
                                    var bp = document.createElement('script');
                                    var curProtocol = window.location.protocol.split(':')[0];
                                    if (curProtocol === 'https') {
                                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                                    } else {
                                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                                    }
                                    var s = document.getElementsByTagName("script")[0];
                                    s.parentNode.insertBefore(bp, s);
                                })();
                            </script>
                            
                                <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143818020-1"></script>
                                <script>
                                    window.dataLayer = window.dataLayer || [];

                                    function gtag() {
                                        dataLayer.push(arguments);
                                    }
                                    gtag('js', new Date());
                                    gtag('config', 'UA-143818020-1');
                                </script>
                                
</head>

<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo">
                <a href="https://blog.shunzi.tech">
                    Elvis Zhang
                </a>
            </div>
            <div id="tp-weather-widget"></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/">
                        主页
                    </a>
                    
                    <a class="menu-item" href="/archives">
                        归档
                    </a>
                    
                    <a class="menu-item" href="/tag/diary">
                        随笔
                    </a>
                    
                    <a class="menu-item" href="/tags">
                        标签
                    </a>
                    
                    <a class="menu-item" href="/post/about">
                        关于
                    </a>
                    
                        <input id="switch_default" type="checkbox" class="switch_default">
                        <label for="switch_default" class="toggleBtn"></label>
            </div>
            <form id="gridea-search-form" data-update="1623475546024" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
            </form>
        </div>
    </nav>

    
        <nav class="navbar-mobile" id="nav-mobile">
            <div class="container">
                <div class="navbar-header">
                    <div>
                        <a href="https://blog.shunzi.tech">
                            Elvis Zhang
                        </a>
                        <!--en-->
                        <a id="mobile-toggle-theme-en" class="a en">&nbsp;Dark</a>
                        <!--zh-->
                        <a id="mobile-toggle-theme-zh" class="a zh">&nbsp;&#x6697;&#x9ED1;</a>
                    </div>
                    <form id="gridea-search-form" data-update="1623475546024" action="/search/index.html">
                        <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
                    </form>
                    <!--en-->
                    <div class="menu-toggle" id="menu-toggle-en" onclick="mobileBtn()">&#9776; Menu</div>
                    <!--zh-->
                    <div class="menu-toggle" id="menu-toggle-zh" onclick="mobileBtn()">&#9776; &#x83DC;&#x5355;</div>

                </div>
                <div class="menu" id="mobile-menu">
                    
                        <a class="menu-item" href="/">
                            主页
                        </a>
                        
                        <a class="menu-item" href="/archives">
                            归档
                        </a>
                        
                        <a class="menu-item" href="/tag/diary">
                            随笔
                        </a>
                        
                        <a class="menu-item" href="/tags">
                            标签
                        </a>
                        
                        <a class="menu-item" href="/post/about">
                            关于
                        </a>
                        
                </div>
            </div>
        </nav>
</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementById("menu-toggle-en");
        var toggleMenu_zh = document.getElementById("menu-toggle-zh");

        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.display != "none") {
            if (toggleMenu.classList.contains("active")) {
                toggleMenu.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu.classList.add("active")
                mobileMenu.classList.add("active")
            }
        } else if (toggleMenu_zh.display != "none") {
            if (toggleMenu_zh.classList.contains("active")) {
                toggleMenu_zh.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu_zh.classList.add("active")
                mobileMenu.classList.add("active")
            }
        }

    }
</script>



    <script>
        (function(a, h, g, f, e, d, c, b) {
            b = function() {
                d = h.createElement(g);
                c = h.getElementsByTagName(g)[0];
                d.src = e;
                d.charset = "utf-8";
                d.async = 1;
                c.parentNode.insertBefore(d, c)
            };
            a["SeniverseWeatherWidgetObject"] = f;
            a[f] || (a[f] = function() {
                (a[f].q = a[f].q || []).push(arguments)
            });
            a[f].l = +new Date();
            if (a.attachEvent) {
                a.attachEvent("onload", b)
            } else {
                a.addEventListener("load", b, false)
            }
        }(window, document, "script", "SeniverseWeatherWidget", "//cdn.sencdn.com/widget2/static/js/bundle.js?t=" + parseInt((new Date().getTime() / 100000000).toString(), 10)));
        window.SeniverseWeatherWidget('show', {
            flavor: "slim",
            location: "WWEFQFPJZ7T8",
            geolocation: true,
            language: "auto",
            unit: "c",
            theme: "auto",
            token: "61bcc333-3305-4728-9465-6785274bb0a3",
            hover: "enabled",
            container: "tp-weather-widget"
        })
    </script>
    
            <div class="main">
                <div class="container">
                    <article class="post-wrap">
                        <header class="post-header">
                            <h1 class="post-title">
                                网络代理基础
                            </h1>
                            
                                    <!--zh-->
                                    <div class="post-meta zh">
                                        &#x4F5C;&#x8005;:
                                        <a itemprop="author" rel="author" href="/">
                                            Elvis Zhang
                                        </a>
                                        <span class="post-time">&#x65E5;&#x671F;: <a href="#">2019-07-27</a></span>
                                        <span class="post-readtime">&#x9605;&#x8BFB;&#x65F6;&#x95F4;:<a
                                    href="#">12.2
                                    &#x5206;&#x949F;</a></span>
                                        <span class="post-words">&#x5B57;&#x6570;:<a href="#">3285</a></span>
                                        
                                            <span class="post-category">&#x5206;&#x7C7B;:
                                
                                <a href="https://blog.shunzi.tech/tag/ZqEqvRTvl/">网络</a>
                                
                            </span>
                                            
                                                阅读量:
                                                <span data-hk-page="current"> - </span>
                                                
                                    </div>
                                    
                        </header>
                        
                            <img class="post-feature-image" src="https://www.ionos.ca/digitalguide/fileadmin/DigitalGuide/Teaser/proxy-t.jpg" alt="">
                          
                        <div class="post-content">
                            <blockquote>
<ul>
<li>源于师姐提到的一个问题：什么是反向代理？</li>
<li>之前本科在自己建站以及做学校项目的时候其实有涉及到，但没进行总结</li>
<li>趁此机会埋个坑，把代理的东西好好理一理，顺便讲讲 VPN 啥的</li>
<li>未完待续~</li>
</ul>
</blockquote>
<!-- more -->
<h2 id="基本概念">基本概念</h2>
<h3 id="什么是代理">什么是代理？</h3>
<ul>
<li>代理：顾名思义，根据汉语拆词为字进行组词就很好理解。代，代表；理，处理。所以代理往往是描述了一个中间人所要做的工作，就是代表某一方进行某些事情的处理。</li>
<li>对于商业场景中关于代理的故事就不再此处进行赘述，此处则主要探讨在计算机领域中主要涉及到的 <strong>网络代理</strong>。</li>
</ul>
<h3 id="网络代理">网络代理</h3>
<ul>
<li>一种特殊的网络服务，英文名做 Proxy，允许一个网络终端（一般为客户端）通过这个服务与另一个网络终端（一般为服务器）进行非直接的连接。一些网关、路由器等网络设备具备网络代理功能。一般认为代理服务有利于保障网络终端的隐私或安全，防止攻击。</li>
<li>一个完整的代理请求过程为：客户端首先与代理服务器创建连接，接着根据代理服务器所使用的代理协议，请求对目标服务器创建连接、或者获得目标服务器的指定资源（如：文件）。在后一种情况中，代理服务器可能对目标服务器的资源下载至本地缓存，如果客户端所要获取的资源在代理服务器的缓存之中，则代理服务器并不会向目标服务器发送请求，而是直接传回已缓存的资源。</li>
<li>一些代理协议允许代理服务器改变客户端的原始请求、目标服务器的原始响应，以满足代理协议的需要。代理服务器的选项和设置在计算机程序中，通常包括一个“防火墙”，允许用户输入代理地址，它会遮盖他们的网络活动，可以允许绕过互联网过滤实现网络访问。</li>
</ul>
<h2 id="常见类型">常见类型</h2>
<h3 id="正向代理forward-proxy">正向代理（Forward Proxy）</h3>
<h4 id="基本原理">基本原理</h4>
<ul>
<li>常见的场景中所提到的代理一般都是指 正向代理。</li>
<li>正向代理是指 <strong>用户</strong> 利用 代理服务器 访问 目标服务器。</li>
<li>主要目的：隐藏客户端，忽略客户端的差异。</li>
</ul>
<figure data-type="image" tabindex="1"><img src="https://github.com/zjs1224522500/files-and-images/blob/master/blog/pic/Forward-Proxy.jpg?raw=true" alt="image" loading="lazy"></figure>
<h4 id="使用场景">使用场景</h4>
<ul>
<li>访问本地无法访问的服务器；最简单的例子就是翻墙，还有针对部分只能内网访问的场景，往往需要借助代理服务器，才能进行相关资源的访问（譬如实验室的服务器）。</li>
<li>缓存（Cahce）作用：cache技术与代理服务技术是紧密联系的，假设我们的电脑是用户A，我们想通过代理服务器X访问服务器A上的数据B，如果在这之前，有人通过代理服务器X访问过该数据，那么代理服务器X会把数据B保存一段时间，在这段时间内，如果我们想访问数据B，代理服务器会直接把缓存的数据B直接发给我们，而不会再去访问服务器A。</li>
<li>权限控制：防火墙授权代理服务器访问权限，客户端通过正向代理可以通过防火墙；故部分内网的服务器会限制登录IP为代理服务器IP，从而保证只有在已知代理服务器的情况下才能访问内网服务器。</li>
<li>隐藏访问者：通过配置，目标服务器无法获取真实客户端信息，只能获取到代理服务器的信息，针对部分安全性要求较高的业务，往往需要隐藏客户端。（BTW，但严格意义上仍是不安全的）</li>
<li>针对某些限制 IP 访问次数的场景，常常使用 IP 代理池来进行代理访问，从而使用代理服务器的多个 IP 来进行相关访问。特别是某些数据爬取的场景。</li>
</ul>
<h4 id="实现方式">实现方式</h4>
<ul>
<li>利用 Nginx、Apache 等 Web 服务器来引入相关代理模块并进行配置，从而转发客户端传递来的 Web 请求。</li>
<li>利用一些软件，进行相应协议的通信加密和转换，实现对应的功能。</li>
</ul>
<h4 id="延申">延申</h4>
<ul>
<li>正向代理根据协议划分主要有HTTP、HTTP over TLS(HTTPS)、Socks、Socks over TLS几种。其中，HTTP和Socks无法用于翻墙，HTTPS和Socks over TLS可以用于翻墙。</li>
<li>四种代理协议都可以通过“用户先将数据发给代理服务器，再由代理服务器转发给目的服务器”的方法达到翻墙目的。但由于HTTP和Socks都是明文协议，GFW可以通过检查数据包内的内容得知用户的真实意图，进而拦截数据包。所以，HTTP和Socks一般只用作本地代理。而HTTPS协议是加密通讯，GFW无法得知数据包内的真实内容，类似于关键词过滤的手段无法施展。HTTPS代理的流量特征和我们平时访问网站时所产生的HTTPS流量几乎一模一样，GFW无法分辨，稳定性爆表。</li>
</ul>
<h4 id="常见正向代理软件">常见正向代理软件</h4>
<h5 id="tinyproxy">tinyproxy</h5>
<ul>
<li>tinyproxy 是一款轻量级的正向代理软件，主要是比较轻量，常用在一些嵌入式设备以及移动终端中，性能表现一般。</li>
<li><a href="https://github.com/tinyproxy/tinyproxy">Github Repo</a></li>
<li>Tinyproxy 安装配置教程请移步 <a href="https://chaosd.github.io/2021/01/19/tinyproxy%E9%85%8D%E7%BD%AE%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BB%A3%E7%90%86/">Chaos' Blog：centos 7使用tinyproxy配置局域网代理</a></li>
</ul>
<h5 id="gost">gost</h5>
<ul>
<li>GO 语言实现的安全隧道</li>
<li><a href="https://github.com/ginuerzh/gost">Github Repo</a></li>
<li><a href="https://docs.ginuerzh.xyz/gost/getting-started/">官方教程</a></li>
<li>经过简单对比，gost 代理性能要比 tinyproxy 好很多。</li>
<li>运行教程：</li>
</ul>
<pre><code>wget http://github.com/ginuerzh/gost/releases/download/v2.11.1/gost-linux-amd64-2.11.1.gz
gunzip gost-linux-amd64-2.11.1.gz
mv gost-linux-amd64-2.11.1 gost
chmod +x gost
nohup ./gost -L :9002 &gt; ./gost.log &amp;
</code></pre>
<h3 id="反向代理">反向代理</h3>
<h4 id="基本原理-2">基本原理</h4>
<ul>
<li>正向代理代理的是用户，而反向代理则相反，代理对象是目标服务器。</li>
<li>反向代理：指 <strong>服务端</strong> 利用 代理服务器 给 用户 提供服务。</li>
<li>主要目的：向客户端隐藏服务端的细节，由代理服务器统一接管，并根据适当的策略（负载均衡等）来分发相应的请求并最终通过代理服务器进行返回。</li>
</ul>
<figure data-type="image" tabindex="2"><img src="https://github.com/zjs1224522500/files-and-images/blob/master/blog/pic/Reverse-Proxy.jpg?raw=true" alt="image" loading="lazy"></figure>
<h4 id="使用场景-2">使用场景</h4>
<ul>
<li>保护和隐藏原始资源服务器；用户A始终认为它访问的是原始服务器B而不是代理服务器Z，但实用际上反向代理服务器接受用户A的应答，从原始资源服务器B中取得用户A的需求资源，然后发送给用户A。由于防火墙的作用，只允许代理服务器Z访问原始资源服务器B。尽管在这个虚拟的环境下，防火墙和反向代理的共同作用保护了原始资源服务器B，但用户A并不知情。</li>
</ul>
<figure data-type="image" tabindex="3"><img src="https://github.com/zjs1224522500/files-and-images/blob/master/blog/pic/ReverseProxy-CL.jpg?raw=true" alt="image" loading="lazy"></figure>
<ul>
<li>负载均衡：当反向代理服务器不止一个的时候，我们甚至可以把它们做成集群，当更多的用户访问资源服务器B的时候，让不同的代理服务器Z（x）去应答不同的用户，然后发送不同用户需要的资源。当然反向代理服务器像正向代理服务器一样拥有CACHE的作用，它可以缓存原始资源服务器B的资源，而不是每次都要向原始资源服务器B请求数据，特别是一些静态的数据，比如图片和文件，如果这些反向代理服务器能够做到和用户X来自同一个网络，那么用户X访问反向代理服务器X，就会得到很高质量的速度。这正是CDN技术的核心。</li>
</ul>
<figure data-type="image" tabindex="4"><img src="https://github.com/zjs1224522500/files-and-images/blob/master/blog/pic/LoadBalanceProxy.jpg?raw=true" alt="image" loading="lazy"></figure>
<ul>
<li>缓存作用：数据缓存在代理服务器上，如果客户端请求的内容在缓存中则不去访问目标主机；</li>
</ul>
<h4 id="延申-2">延申</h4>
<ul>
<li>利用反向代理实现内网穿透。通过使用SSH将内网服务器的22端口对应地转发到反向代理服务器上的某个端口，从而建立了从内网服务器到代理服务器的反向代理；接着在代理服务器上通过将本机的某个端口转发到反向代理服务端口来建立正向代理，从而使得在外网的任何一台服务器都可】通过代理服务器上提供的正向代理来对远程的内网服务器进行操作。</li>
<li>常见的内网穿透工具可参考文献中的【7】。</li>
</ul>
<h5 id="ssh">ssh</h5>
<ul>
<li>ssh 参数解释：
<ul>
<li>-f 后台执行ssh指令</li>
<li>-C 允许压缩数据</li>
<li>-N 不执行远程指令</li>
<li>-R 将远程主机(服务器)的某个端口转发到本地端指定机器的指定端口</li>
<li>-L 将本地机(客户机)的某个端口转发到远端指定机器的指定端口</li>
<li>-p 指定远程主机的端口</li>
</ul>
</li>
<li>ssh 正向代理配置：<code>ssh -fCNL</code></li>
<li>ssh 反向代理配置：<code>ssh -fCNR</code></li>
</ul>
<h6 id="场景">场景</h6>
<ul>
<li>内网服务器 I：192.168.3.126  | ssh 端口：22</li>
<li>外网服务器 O：45.45.45.45    | ssh 端口：33</li>
<li><strong>step1 在内网服务器 I 上建立 内网服务器 I 到 外网服务器 O 的反向代理</strong></li>
</ul>
<pre><code class="language-Bash"># 该命令将本地的ssh端口反向代理到了远程服务器的7777端口
# 参数解释：ssh -fCNR 
#   外网服务器对应的代理通信 IP:Port - 7777  (IP可省略)
#   内网服务器对应的代理通信 IP:Port - localhost:22 （为了建立ssh连接使用了22端口）
#   登陆远程服务器使用的信息 root@IP -p port - root@45.45.45.45 -p 33
#
[root@servermwd ~]# ssh -fCNR 7777:localhost:22 root@45.45.45.45 -p 33

</code></pre>
<ul>
<li><strong>step2 在外网服务器 O 上建立 正向代理</strong></li>
</ul>
<pre><code class="language-Bash"># 该命令建立了本机端口 7776 到 7777 的正向代理
# 参数解释：ssh -fCNR 
#   服务器A 对应的代理通信 IP:Port - *:7776  (IP可省略,将会使用命令末尾的IP)
#   服务器B 对应的代理通信 IP:Port - localhost:7777 (对应内网服务器反向代理的端口)
#   登陆A 服务器使用的信息 IP -p port - localhost -p 33
#
[root@45 ~]# ssh -fCNL *:7776:localhost:7777 localhost -p 33
</code></pre>
<ul>
<li><strong>step3 使用ssh连接内网服务器</strong></li>
</ul>
<pre><code class="language-Bash"># 该命令建立了到外网服务器指定端口的ssh连接
# 1. 7776 端口对应地被正向代理转发到了 7777端口；
# 2. 7777 端口对应地被反向代理代理到了 内网服务器的22端口
# 3. 从而建立起了对内网服务器的 ssh 连接
#
&gt; ssh -p 7776 root@45.45.45.45
</code></pre>
<ul>
<li><strong>(可选) step4 内网服务器配置ssh免密登陆并使用 autossh来进行自动重连</strong></li>
</ul>
<pre><code class="language-Bash"># 免密登录
ssh-copy-id root@45.45.45.45

# 安装autossh
yum install autossh

# 同 ssh 的参数一致
# 多了一个 -M port的参数，主要用于外网服务器接受内网服务器的信息
autossh -M 7775 -fCNR 7777:localhost:22 root@45.45.45.45 -p 33 
</code></pre>
<ul>
<li><strong>(可选) step5 将autossh加入内网服务器开机启动项，并使配置生效</strong></li>
</ul>
<pre><code class="language-Bash">vi /etc/rc.d/rc.local

# 添加内容
autossh -M 7775 -fCNR 7777:localhost:22 root@45.45.45.45 -p 33

# 赋予权限
chmod +x /etc/rc.d/rc.local
</code></pre>
<h4 id="last-but-not-least-猴子都能看懂的步骤">Last but not least (猴子都能看懂的步骤)</h4>
<p>【Firstly】<br>
先告诉憨憨们<br>
xx.xx.xx.xx  =&gt;  你的跳板机IP<br>
8111          =&gt;  跳板机对应的端口</p>
<p>【SSH 公钥私钥生成】<br>
ssh-keygen</p>
<p>【ssh 免密登录：(免密失败检查公私钥和跳板机配置)】<br>
ssh-copy-id root@xx.xx.xx.xx<br>
ssh -vvv xx.xx.xx.xx // 查看日志错误信息</p>
<p>【centos 安装 autossh】<br>
yum install autossh<br>
【安装失败使用 RPM 安装】<br>
wget http://download-ib01.fedoraproject.org/pub/epel/7/x86_64/Packages/a/autossh-1.4g-1.el7.x86_64.rpm<br>
rpm -i autossh-1.4g-1.el7.x86_64.rpm<br>
【检查是否安装成功】<br>
rpm -qa | grep autossh</p>
<p>【autossh 反代命令】：<br>
autossh -M 2222 -NfR 8111:localhost:22 root@xx.xx.xx.xx -p 22</p>
<p>// -M 后的端口时 autossh 接收错误消息自动重连的，不用管<br>
// -NfR 后的端口才是你最后会用的，你懂我意思吧~<br>
// -p  22 列出来是怕有的憨憨默认ssh端口不是22的，专门写出来！！<br>
//很清楚了吧~</p>
<p>【连接时 connection refused，需要打开跳板机端口，重启ssh service】<br>
vim /etc/ssh/sshd_config<br>
...<br>
GatewayPorts yes<br>
AuthorizedKeysFile .ssh/authorized_keys<br>
...</p>
<p>sudo /etc/init.d/ssh restart</p>
<p>【反代连接】<br>
ssh root@xx.xx.xx.xx -p 8111</p>
<h2 id="参考文献">参考文献</h2>
<ul>
<li><a href="https://zh.wikipedia.org/zh-cn/%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8">[1] 维基百科：代理服务器</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/56271931">[2] 知乎 - AntSworD：简单聊聊网络代理原理</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/27424255">[3] 知乎 - 不梦君：proxy代理基础<br>
</a></li>
<li><a href="https://medium.com/@thomas_summon/%E6%B5%85%E8%B0%88vpn-vps-proxy%E4%BB%A5%E5%8F%8Ashadowsocks%E4%B9%8B%E9%97%B4%E7%9A%84%E8%81%94%E7%B3%BB%E5%92%8C%E5%8C%BA%E5%88%AB-b0198f92db1b">[4] Google Blog : 浅谈vpn、vps、Proxy以及shadowsocks之间的联系和区别</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/68560128">[5] 知乎 - 波哥：彻底理解正向代理、反向代理、透明代理<br>
</a></li>
<li><a href="https://www.cnblogs.com/bubaya/p/7828817.html">[6] 博客园 - 不拨牙：ssh反向代理</a></li>
<li><a href="https://www.jianshu.com/p/cdc446e51675">[7] 简书 - OSC开源社区：可以实现内网穿透的几款工具</a></li>
</ul>

                        </div>
                        
                            <div class="post-toc">
                                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">基本概念</a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BB%A3%E7%90%86">什么是代理？</a></li>
<li><a href="#%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86">网络代理</a></li>
</ul>
</li>
<li><a href="#%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%9E%8B">常见类型</a>
<ul>
<li><a href="#%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86forward-proxy">正向代理（Forward Proxy）</a>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86">基本原理</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">使用场景</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F">实现方式</a></li>
<li><a href="#%E5%BB%B6%E7%94%B3">延申</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86%E8%BD%AF%E4%BB%B6">常见正向代理软件</a>
<ul>
<li><a href="#tinyproxy">tinyproxy</a></li>
<li><a href="#gost">gost</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86">反向代理</a>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86-2">基本原理</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-2">使用场景</a></li>
<li><a href="#%E5%BB%B6%E7%94%B3-2">延申</a>
<ul>
<li><a href="#ssh">ssh</a>
<ul>
<li><a href="#%E5%9C%BA%E6%99%AF">场景</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#last-but-not-least-%E7%8C%B4%E5%AD%90%E9%83%BD%E8%83%BD%E7%9C%8B%E6%87%82%E7%9A%84%E6%AD%A5%E9%AA%A4">Last but not least (猴子都能看懂的步骤)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE">参考文献</a></li>
</ul>
</li>
</ul>

                            </div>
                            
                                
                                    
                                            <!--zh-->
                                            <section class="post-copyright zh">
                                                <p class="copyright-item ">
                                                    <span>&#x4F5C;&#x8005;:</span>
                                                    <span>Elvis Zhang</span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x6C38;&#x4E45;&#x94FE;&#x63A5;:</span>
                                                    <span><a href="https://blog.shunzi.tech/post/proxy/">https://blog.shunzi.tech/post/proxy/</a></span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x534F;&#x8BAE;:</span>
                                                    <span>MIT License</span>
                                                </p>
                                            </section>
                                            
                                                
                                                    
                                                                    <!--Share-->
                                                                    <span style="margin-right:15px">
                        <i class="post-share"></i>
                        <span>&#x5206;&#x4EAB;:</span>
                                                                    <a title="QR 码" target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://blog.shunzi.tech/post/proxy/"><i class="fa fa-qrcode"></i></a>
                                                                    <a title="QQ" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.shunzi.tech/post/proxy/&sharesource=qzone&title=网络代理基础&pics=https://blog.shunzi.tech/images/avatar.png?v=1623475546024&summary=&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;源于师姐提到的一个问题：什么是反向代理？&lt;/li&gt;
&lt;li&gt;之前本科在自己建站以及做学校项目的时候其实有涉及到，但没进行总结&lt;/li&gt;
&lt;li&gt;趁此机会埋个坑，把代理的东西好好理一理，顺便讲讲 VPN 啥的&lt;/li&gt;
&lt;li&gt;未完待续~&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
"><i class="fa fa-qq"></i></a>
                                                                    <a title="新浪微博" target="_blank" href="https://service.weibo.com/share/share.php?url=https://blog.shunzi.tech/post/proxy/&sharesource=weibo&title=网络代理基础 + " - " + &lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;源于师姐提到的一个问题：什么是反向代理？&lt;/li&gt;
&lt;li&gt;之前本科在自己建站以及做学校项目的时候其实有涉及到，但没进行总结&lt;/li&gt;
&lt;li&gt;趁此机会埋个坑，把代理的东西好好理一理，顺便讲讲 VPN 啥的&lt;/li&gt;
&lt;li&gt;未完待续~&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&pic="https://blog.shunzi.tech/images/avatar.png?v=1623475546024 "><i class="fa fa-weibo "></i></a>

                                                                    </span>
                                                                    
                                                                            <!--zh-->
                                                                            <section class="post-tags zh ">
                                                                                <div>
                                                                                    <span>&#x6807;&#x7B7E;:</span>
                                                                                    <span class="tag ">
                        
                        
                        <a href="https://blog.shunzi.tech/tag/ZqEqvRTvl/">#
                    网络
                        </a>
                        
                            
                                </span>
                                                                                </div>
                                                                                <div>
                                                                                    <a href="javascript:window.history.back();">
                        &#x8FD4;&#x56DE;</a>
                                                                                    <span>&dot;</span>
                                                                                    <a href="#">&#x4E3B;&#x9875;</a>
                                                                                </div>
                                                                            </section>

                                                                            
                                                                                <!---->
                                                                                <section class="post-nav">
                                                                                    
                                                                                        <a class="prev" rel="prev" href="https://blog.shunzi.tech/post/file-and-charset/">
                                                                                            字符编码与文件
                                                                                        </a>
                                                                                        
                                                                                            
                                                                                                <a class="next" rel="next" href="https://blog.shunzi.tech/post/heelo-diary/">
                                                                                                    Hello Diary
                                                                                                </a>
                                                                                                
                                                                                </section>
                    </article>
                </div>
                
                                            
                                                <script type="application/javascript" src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
<div id="vlaine-comment"></div>
<script type="application/javascript">
    new Valine({
        el: '#vlaine-comment',
        appId: 'Pj5H1z0w7hJlLGJpGBh9NrCq-MdYXbMMI',
        appKey: 'LdR8vK5EaBfK87esF7tlbsXe',
        pageSize: 5,
        avatar: 'mp',
        placeholder: '来都来了，不妨评论一下',
        visitor: false,
        highlight: false,
        recordIP: false,
    })
</script>
                                                    
            </div>
    </div>
    </div>
    </div>
    
        <footer id="footer" class="footer">
            <div class="copyright">
                
                        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
                            
                                <b id="hitokoto"></b><br>
                                
                                        <svg viewBox="0 0 1024 1024" style="margin-left: 5px;margin-right: 5px;" version="1.0" width="8" height="8" class="my-face">
            <path
                d="M863.597631 513.574282l-271.33965-140.213484L729.783667 81.926656c3.583731-7.87141 7.167462-15.742819 7.167462-25.214109C736.887134 25.226908 708.345275 0.012799 672.635953 0.012799a63.611229 63.611229 0 0 0-39.293053 12.607055c-1.791866 1.59988-3.519736 3.19976-5.311602 3.19976L147.87531 418.925381a55.547834 55.547834 0 0 0-19.646527 47.356448c1.791866 17.278704 14.27093 33.021523 32.125591 42.492813l271.33965 141.749369L292.504463 945.221908c-12.479064 25.214109-1.791866 53.563983 23.166262 69.306802 10.751194 6.335525 23.230258 9.47129 35.709322 9.47129 16.062795 0 32.125591-4.735645 44.604655-15.742819l480.091993-403.297753a55.547834 55.547834 0 0 0 19.646526-47.228458 61.243407 61.243407 0 0 0-32.12559-44.156688z"
                fill="#93b5cf"></path>
        </svg>
                                        Elvis Zhang &copy;Copyright
                                            <script>
                                                var date = new Date();
                                                document.write("" + date.getFullYear());
                                            </script>
                                            | Powered by
                                            <a href="https://github.com/" target="_blank">
                                                Github Pages
                                            </a>
            </div>
            <div id="update" style="display:none;">
                on
            </div>
            
                <div id="version" style="display:none;">
                    1.7.6
                </div>
                
                    <script>
                        var port = '';
                        
                        document.write('<div id="home_path" style="display:none;">' + document.location.protocol + '//' + window.document.location.hostname + port + '</div>')
                    </script>
        </footer>
        
            <script src='https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js'></script>
            
                <script>
                    
                    
                    loadlive2d();
                    
                    
                    hitokoto();
                    
                    getStar();
                    hljs.initHighlighting();
                    console.clear();
                    
                    CheckVersion();
                    
                    var newDate = new Date();
                    newDate.setTime(1623475546024);
                    console.log(" Blog Update Time: " + newDate.toLocaleDateString());
                    console.log("\n %c \u26a1Theme:Chic Author's Blog:https://blog.itjoker.cn  Write By ITJoker  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;");
                </script>
        </div>
</body>
<script>
    scroll();
</script>

</html>